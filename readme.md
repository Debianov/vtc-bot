[![Build Status](https://github.com/GREEN-Corporation/discord-bot/actions/workflows/checks.yml/badge.svg?branch=main)](https://github.com/GREEN-Corporation/discord-bot/actions/workflows/checks.yml)

![functional](./docs/diagram.png)

# Подготовка к запуску

## База данных
В проекте используется PostgreSQL.

Создайте файл `db_secret.sec` в корне репозитория со следующим содержанием:
```sh
<имя базы данных>
<имя пользователя базы данных>
```

Запустите `./scripts/setupdb.sh` для создания таблиц из `schema.sql`, указав в качестве базы данных указанную в `db_secret.sec`, а в качестве имени пользователя — уполномоченного создавать таблицы.

## Среда
В качестве виртуального окружения используется poetry. Для его инициализации в корне проекта необходимо запустить:
```sh
poetry init
```

## VSCode
В .vscode содержатся верные конфигурации для запуска дебага и тестов. Дополнительных настроек не требуется.

# Запуск
Не забываем установить зависимости:
```sh
poetry install --only main
```
Запуск осуществляется исключительно через poetry:
```sh
poetry run bot
```
Поскольку в проекте используется относительное
импортирование, при запуске другим способом это приведёт к ошибкам импортирования.

# Совместная разработка

## Установка зависимостей
```sh
poetry install --with dev,docs
```
## Документация
За внутреннюю документацию отвечает sphinx. Для его генерации необходимо:
```sh
cd docs
make html
```

Внешняя документация — документация всех функций, которые непосредственно вызываются при вызове команды — реализуется через команды типа "help".

# Ресурсы проекта

